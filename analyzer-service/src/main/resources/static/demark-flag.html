<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <script src="https://img.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
    <script src="https://code.highcharts.com.cn/highstock/8.2.2/highstock.js"></script>
    <script src="https://code.highcharts.com.cn/highstock/8.2.2/modules/exporting.js"></script>
    <script src="https://code.highcharts.com.cn/highstock/8.2.2/modules/data.js"></script>
</head>
<body>
<div id="container" ></div>
<script type="text/javascript">
    var path = window.document.location.href;
    var code = path.split('?')[1].split('=')[1];
    //https://cdn.jsdelivr.net/gh/highcharts/highcharts@v7.0.0/samples/data/usdeur.json
    Highcharts.getJSON('/demark-backtrack/' + code, function (data) {
        var kData = data.k;
        // var year = new Date(kData[kData.length - 1][0]).getFullYear(); // Get year of last data point
        var flagData = [];

        for (var i = 0; i < data.flag.length; i++) {
            var obj = {};
            obj.x = data.flag[i];
            obj.title = 'B';
            obj.text = '(13T,BUY)';
            flagData.push(obj)
        }
        // Create the chart
        Highcharts.stockChart('container', {
            rangeSelector: {
                selected: 4
            },
            title: {
                text: data.name + ' ' +data.code
            },
            yAxis: {
                title: {
                    text: 'Price'
                }
            },

            series: [{
                name: '收盘价',
                data: data.k,
                id: 'dataseries',
                tooltip: {
                    valueDecimals: 2
                }
            }, {
                type: 'flags',
                data: flagData,
                onSeries: 'dataseries',
                shape: 'circlepin',
                width: 16
            },]
        });
    });
</script>



</body>
</html>
